{"remainingRequest":"C:\\xampp\\htdocs\\ukk_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\ukk_front\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\ukk_front\\src\\views\\Home.vue","mtime":1618960897625},{"path":"C:\\xampp\\htdocs\\ukk_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\ukk_front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\xampp\\htdocs\\ukk_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\ukk_front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2hvbWUnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2g6ICIiLAogICAgICBpZF9wZW5nYWR1YW46ICIiLAogICAgICB0Z2xfcGVuZ2FkdWFuOiAiIiwKICAgICAgaXNpX2xhcG9yYW46ICIiLAogICAgICBmb3RvOiAiIiwKICAgICAgaWRfa2F0ZWdvcmk6IiIsCiAgICAgIHN0YXR1czogIiIsCiAgICAgIGFjdGlvbjoiIiwKICAgICAgbWVzc2FnZTogIiIsCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICByb3dzOiAwLAogICAgICBwZXJQYWdlOiAxMCwKICAgICAga2V5OiAiIiwKICAgICAgcGVuZ2FkdWFuOiBbXSwKICAgICAgZmllbGRzOiBbImlkX3BlbmdhZHVhbiIsImlkX3VzZXIiLCAiaWRfa2F0ZWdvcmkiLCAidGdsX3BlbmdhZHVhbiIsICJpc2lfbGFwb3JhbiIsICJmb3RvIiwgInN0YXR1cyJdLAogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGdldERhdGEgOiBmdW5jdGlvbigpewogICAgICBsZXQgY29uZiA9IHsgaGVhZGVyczogeyAiQXV0aG9yaXphdGlvbiIgOiAnQmVhcmVyICcgKyB0aGlzLmtleSB9IH07CiAgICAgIGxldCBvZmZzZXQgPSAodGhpcy5jdXJyZW50UGFnZSAtIDEpICogdGhpcy5wZXJQYWdlOwogICAgICB0aGlzLiRidlRvYXN0LnNob3coImxvYWRpbmdUb2FzdCIpOwogICAgICB0aGlzLmF4aW9zLmdldCgibWFzeWFyYWthdC9wZW5nYWR1YW4vIiArIHRoaXMucGVyUGFnZSArICIvIiArIG9mZnNldCwgY29uZikKICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuc3VjY2VzcyA9PSAxKXsKICAgICAgICAgIHRoaXMuJGJ2VG9hc3QuaGlkZSgibG9hZGluZ1RvYXN0Iik7CiAgICAgICAgICB0aGlzLnBlbmdhZHVhbiA9IHJlc3BvbnNlLmRhdGEuZGF0YS5wZW5nYWR1YW47CiAgICAgICAgICB0aGlzLnJvd3MgPSByZXNwb25zZS5kYXRhLmRhdGEuY291bnQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJGJ2VG9hc3QuaGlkZSgibG9hZGluZ1RvYXN0Iik7CiAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAiR2FnYWwgbWVuYW1waWxrYW4gZGF0YSBNYXN5YXJha2F0IGF0YXUgYW5kYSBsb2dpbiBzZWJhZ2FpIGFkbWluL3BldHVnYXMiCiAgICAgICAgICB0aGlzLiRidlRvYXN0LnNob3coIm1lc3NhZ2UiKTsKICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICJsb2dpbiJ9KQogICAgICAgIH0KICAgICAgfSkKICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgICAgCiAgICBBZGQgOiBmdW5jdGlvbigpewogICAgICB0aGlzLmFjdGlvbiA9ICJpbnNlcnQiOwogICAgICB0aGlzLnRnbF9wZW5nYWR1YW4gPSAiIjsKICAgICAgdGhpcy5pc2lfbGFwb3JhbiA9ICIiOwogICAgICB0aGlzLmlkX2thdGVnb3JpPSIiOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm90byIpLnZhbHVlID0gbnVsbDsgCiAgICB9LAoKICAgIFNhdmUgOiBmdW5jdGlvbigpewogICAgICBsZXQgY29uZiA9IHsgaGVhZGVyczogeyAiQXV0aG9yaXphdGlvbiIgOiAnQmVhcmVyICcgKyB0aGlzLmtleSB9IH07CiAgICAgIHRoaXMuJGJ2VG9hc3Quc2hvdygibG9hZGluZ1RvYXN0Iik7CiAgICAgIGlmKHRoaXMuYWN0aW9uID09PSAiaW5zZXJ0Iil7CiAgICAgICAgbGV0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBmb3JtLmFwcGVuZCgidGdsX3BlbmdhZHVhbiIsIHRoaXMudGdsX3BlbmdhZHVhbik7CiAgICAgICAgZm9ybS5hcHBlbmQoImlzaV9sYXBvcmFuIiwgdGhpcy5pc2lfbGFwb3Jhbik7CiAgICAgICAgZm9ybS5hcHBlbmQoImlkX2thdGVnb3JpIiwgdGhpcy5pZF9rYXRlZ29yaSk7CiAgICAgICAgZm9ybS5hcHBlbmQoImZvdG8iLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm90byIpLmZpbGVzWzBdKTsKICAgICAgICAgICAgCiAgICAgICAgdGhpcy5heGlvcy5wb3N0KCJtYXN5YXJha2F0L3BlbmdhZHVhbiIsIGZvcm0sIGNvbmYpCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuJGJ2VG9hc3QuaGlkZSgibG9hZGluZ1RvYXN0Iik7CiAgICAgICAgaWYodGhpcy5zZWFyY2ggPT0gIiIpewogICAgICAgICAgdGhpcy5nZXREYXRhKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5zZWFyY2hpbmcoKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMubWVzc2FnZSA9IHJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICAgICAgICAgIHRoaXMuJGJ2VG9hc3Quc2hvdygibWVzc2FnZSIpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0gCiAgICAgIC8vIGVsc2UgewogICAgICAvLyAvLyAgIGxldCBmb3JtID0gewogICAgICAvLyAvLyAgICAgdGdsX3BlbmdhZHVhbjogdGhpcy50Z2xfcGVuZ2F1ZGFuLAogICAgICAvLyAvLyAgICAgaXNpX2xhcG9yYW46IHRoaXMuaXNpX2xhcG9yYW4sCiAgICAgIC8vIC8vICAgICBpZF9rYXRlZ29yaTogdGhpcy5pZF9rYXRlZ29yaSwKICAgICAgLy8gLy8gICAgIGZvdG86IHRoaXMuZm90bywKICAgICAgLy8gLy8gICB9CiAgICAgIC8vIC8vICAgdGhpcy5heGlvcy5wdXQoIi9zaXN3YS8iICsgdGhpcy5pZCwgZm9ybSwgY29uZikKICAgICAgLy8gLy8gICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIC8vIC8vICAgICB0aGlzLiRidlRvYXN0LmhpZGUoImxvYWRpbmdUb2FzdCIpOwogICAgICAvLyAvLyAgICAgaWYodGhpcy5zZWFyY2ggPT0gIiIpewogICAgICAvLyAvLyAgICAgICB0aGlzLmdldERhdGEoKTsKICAgICAgLy8gLy8gICAgIH0gZWxzZSB7CiAgICAgIC8vIC8vICAgICAgIHRoaXMuc2VhcmNoaW5nKCk7CiAgICAgIC8vIC8vICAgICB9CiAgICAgIC8vIC8vICAgICB0aGlzLm1lc3NhZ2UgPSByZXNwb25zZS5kYXRhLmRhdGEubWVzc2FnZTsKICAgICAgLy8gLy8gICAgIHRoaXMuJGJ2VG9hc3Quc2hvdygibWVzc2FnZSIpOwogICAgICAvLyAvLyAgIH0pCiAgICAgIC8vIC8vICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgLy8gLy8gICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgLy8gLy8gICB9KTsKICAgICAgLy8gfQogICAgfSwKICB9LAogIG1vdW50ZWQoKXsKICAgIHRoaXMua2V5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIkF1dGhvcml6YXRpb24iKTsKICAgIC8vIHRoaXMuZ2V0RGF0YSgpOwogIH0KfQo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <!-- partial -->\n    <div class=\"container-fluid page-body-wrapper\">\n      <div class=\"main-panel\">\n        <section class=\"contact section-padding\">\n          <div class=\"container\">\n            <div class=\"row\">\n              <div class=\"col-lg-6 mx-auto col-md-7 col-12 py-3 mt-5 text-center\" >\n                <h2 class=\"mb-4\">Selamat datang, silahkan <strong>buat laporan pengaduan</strong> anda</h2>\n              </div>\n              <div class=\"col-lg-8 mx-auto col-md-10 col-12 text-center\">\n                <a class=\"new-btn btn-pm btn mt-5\" v-b-modal.modalPengaduan v-on:click=\"Add\">\n                  <i class=\"fa fa-edit\"></i>\n                  Tulis Pengaduan\n                </a>  \n                <a class=\"new-btn btn-pm btn mt-5 ml-2\" href=\"/lihatPengaduan\">\n                  <i class=\"fa fa-folder\"></i>\n                  Lihat Pengaduan\n                </a>      \n              </div>\n            </div>\n            <b-toast id=\"loadingToast\" title=\"Processing Data\" no-auto-hide>\n              <b-spinner label=\"Spinning\" variant=\"success\"></b-spinner>\n              <strong class=\"text-success\">Loading...</strong>\n            </b-toast>\n                <!-- toast untuk tampilan message box -->\n            <b-toast id=\"message\" title=\"Message\">\n              <strong class=\"text-success\">{{ message }}</strong>\n            </b-toast>\n          </div>\n        </section>\n      </div>\n      <b-modal id=\"modalPengaduan\" @ok=\"Save\">\n        <template v-slot:modal-title>\n          Form Laporan Pengaduan\n        </template>\n        <form ref=\"form\">\n          <div class=\"form-group\">\n            <label for=\"tgl_pengaduan\" class=\"col-form-label\">Tanggal Pengaduan</label>\n            <input type=\"date\" name=\"tgl_pengaduan\" class=\"form-control\" id=\"tgl_pengaduan\" placeholder=\"Tanggal\" v-model=\"tgl_pengaduan\">\n          </div>\n          <div class=\"form-group\">\n            <label for=\"isi_laporan\" class=\"col-form-label\">Isi Laporan</label>\n            <input type=\"text\" name=\"isi_laporan\" class=\"form-control\" id=\"Isi Laporan\" placeholder=\"Isi Laporan\" v-model=\"isi_laporan\">\n          </div>\n          <div class=\"form-group\">\n            <label for=\"id_kategori\" class=\"col-form-label\">Kategori</label>\n            <select class=\"form-control\" v-model=\"id_kategori\">\n              <option value=\"1\">Fasilitas Umum</option>\n              <option value=\"2\">Kesehatan</option>\n              <option value=\"3\">Ekonomi</option>\n              <option value=\"4\">Pelayanan Publik</option>\n            </select>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"foto\" class=\"col-form-label\">Foto</label>\n            <input type=\"file\" name=\"foto\" class=\"form-control\" id=\"foto\" placeholder=\"Foto\">\n          </div>\n        </form>\n      </b-modal>\n    </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'home',\n  data() {\n    return {\n      search: \"\",\n      id_pengaduan: \"\",\n      tgl_pengaduan: \"\",\n      isi_laporan: \"\",\n      foto: \"\",\n      id_kategori:\"\",\n      status: \"\",\n      action:\"\",\n      message: \"\",\n      currentPage: 1,\n      rows: 0,\n      perPage: 10,\n      key: \"\",\n      pengaduan: [],\n      fields: [\"id_pengaduan\",\"id_user\", \"id_kategori\", \"tgl_pengaduan\", \"isi_laporan\", \"foto\", \"status\"],\n    }\n  },\n\n  methods: {\n    getData : function(){\n      let conf = { headers: { \"Authorization\" : 'Bearer ' + this.key } };\n      let offset = (this.currentPage - 1) * this.perPage;\n      this.$bvToast.show(\"loadingToast\");\n      this.axios.get(\"masyarakat/pengaduan/\" + this.perPage + \"/\" + offset, conf)\n      .then(response => {\n        if(response.data.success == 1){\n          this.$bvToast.hide(\"loadingToast\");\n          this.pengaduan = response.data.data.pengaduan;\n          this.rows = response.data.data.count;\n        } else {\n          this.$bvToast.hide(\"loadingToast\");\n          this.message = \"Gagal menampilkan data Masyarakat atau anda login sebagai admin/petugas\"\n          this.$bvToast.show(\"message\");\n            // this.$router.push({name: \"login\"})\n        }\n      })\n      .catch(error => {\n        console.log(error);\n      });\n    },\n      \n    Add : function(){\n      this.action = \"insert\";\n      this.tgl_pengaduan = \"\";\n      this.isi_laporan = \"\";\n      this.id_kategori=\"\";\n      document.getElementById(\"foto\").value = null; \n    },\n\n    Save : function(){\n      let conf = { headers: { \"Authorization\" : 'Bearer ' + this.key } };\n      this.$bvToast.show(\"loadingToast\");\n      if(this.action === \"insert\"){\n        let form = new FormData();\n        form.append(\"tgl_pengaduan\", this.tgl_pengaduan);\n        form.append(\"isi_laporan\", this.isi_laporan);\n        form.append(\"id_kategori\", this.id_kategori);\n        form.append(\"foto\", document.getElementById(\"foto\").files[0]);\n            \n        this.axios.post(\"masyarakat/pengaduan\", form, conf)\n        .then(response => {\n        this.$bvToast.hide(\"loadingToast\");\n        if(this.search == \"\"){\n          this.getData();\n        } else {\n            this.searching();\n          }\n          this.message = response.data.message;\n          this.$bvToast.show(\"message\");\n        })\n        .catch(error => {\n        console.log(error);\n        });\n      } \n      // else {\n      // //   let form = {\n      // //     tgl_pengaduan: this.tgl_pengaudan,\n      // //     isi_laporan: this.isi_laporan,\n      // //     id_kategori: this.id_kategori,\n      // //     foto: this.foto,\n      // //   }\n      // //   this.axios.put(\"/siswa/\" + this.id, form, conf)\n      // //   .then(response => {\n      // //     this.$bvToast.hide(\"loadingToast\");\n      // //     if(this.search == \"\"){\n      // //       this.getData();\n      // //     } else {\n      // //       this.searching();\n      // //     }\n      // //     this.message = response.data.data.message;\n      // //     this.$bvToast.show(\"message\");\n      // //   })\n      // //   .catch(error => {\n      // //     console.log(error);\n      // //   });\n      // }\n    },\n  },\n  mounted(){\n    this.key = localStorage.getItem(\"Authorization\");\n    // this.getData();\n  }\n}\n</script>\n"]}]}